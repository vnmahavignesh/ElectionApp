<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voter Registration System</title>
    <!-- Cordova Script - MUST be first -->
    <script type="text/javascript" src="cordova.js"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Sans:wght@400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <div class="container">
        <header>
            <h1>Voter Registration System</h1>
            <p class="subtitle">Register and manage voter information efficiently</p>
        </header>

        <div class="form-section">
            <h2 class="section-title">Registration Form</h2>
            <form id="voterForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="name">Full Name *</label>
                        <input type="text" id="name" name="name" required>
                        <span class="error-message">Please enter full name</span>
                    </div>
                    <div class="form-group">
                        <label for="dob">Date of Birth *</label>
                        <input type="date" id="dob" name="dob" required>
                        <span class="error-message">Please select date of birth</span>
                    </div>
                    <div class="form-group">
                        <label for="age">Age</label>
                        <input type="number" id="age" name="age" readonly style="background: #e8e4df;">
                    </div>
                    <div class="form-group">
                        <label for="eligibility">Voter Eligibility *</label>
                        <select id="eligibility" name="eligibility" required>
                            <option value="" selected disabled>Select</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                        <span class="error-message">Please select voter eligibility</span>
                    </div>
                    <div class="form-group">
                        <label for="voterId">Voter ID Number *</label>
                        <input type="text" id="voterId" name="voterId" required>
                        <span class="error-message">Please enter voter ID number</span>
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone Number *</label>
                        <input type="tel" id="phone" name="phone" required>
                        <span class="error-message">Please enter phone number</span>
                    </div>
                    <div class="form-group">
                        <label for="district">District *</label>
                        <input type="text" id="district" name="district" required>
                        <span class="error-message">Please enter district</span>
                    </div>
                    <div class="form-group">
                        <label for="city">City *</label>
                        <input type="text" id="city" name="city" required>
                        <span class="error-message">Please enter city</span>
                    </div>
                    <div class="form-group">
                        <label for="area">Area *</label>
                        <input type="text" id="area" name="area" required>
                        <span class="error-message">Please enter area</span>
                    </div>
                    <div class="form-group">
                        <label for="street">Street Name *</label>
                        <input type="text" id="street" name="street" required>
                        <span class="error-message">Please enter street name</span>
                    </div>
                    <div class="form-group">
                        <label for="pincode">Pincode *</label>
                        <input type="text" id="pincode" name="pincode" pattern="[0-9]{6}" required>
                        <span class="error-message">Please enter valid 6-digit pincode</span>
                    </div>
                    <div class="form-group">
                        <label for="address">Full Address</label>
                        <textarea id="address" name="address" placeholder="Complete address..."></textarea>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        <span>âž¤</span> Submit Registration
                    </button>
                    <button type="button" class="btn btn-success" id="saveChangesBtn">
                        <span>ðŸ’¾</span> Save Changes
                    </button>
                </div>
            </form>
        </div>

        <!-- Edit Voter Modal -->
        <div id="editVoterModal" class="modal-overlay">
            <div class="modal-content">
                <button class="modal-close" id="closeEditModal">Ã—</button>
                <h2>Edit Voter Details</h2>
                <form id="editVoterForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="edit_name">Full Name *</label>
                            <input type="text" id="edit_name" name="edit_name" required>
                            <span class="error-message">Please enter full name</span>
                        </div>
                        <div class="form-group">
                            <label for="edit_dob">Date of Birth *</label>
                            <input type="date" id="edit_dob" name="edit_dob" required>
                            <span class="error-message">Please select date of birth</span>
                        </div>
                        <div class="form-group">
                            <label for="edit_age">Age</label>
                            <input type="number" id="edit_age" name="edit_age" readonly style="background: #e8e4df;">
                        </div>
                        <div class="form-group">
                            <label for="edit_eligibility">Voter Eligibility *</label>
                            <select id="edit_eligibility" name="edit_eligibility" required>
                                <option value="" selected disabled>Select</option>
                                <option value="Yes">Yes</option>
                                <option value="No">No</option>
                            </select>
                            <span class="error-message">Please select voter eligibility</span>
                        </div>
                        <div class="form-group">
                            <label for="edit_voterId">Voter ID Number *</label>
                            <input type="text" id="edit_voterId" name="edit_voterId" required>
                            <span class="error-message">Please enter voter ID number</span>
                        </div>
                        <div class="form-group">
                            <label for="edit_phone">Phone Number *</label>
                            <input type="tel" id="edit_phone" name="edit_phone" required>
                            <span class="error-message">Please enter phone number</span>
                        </div>
                        <div class="form-group">
                            <label for="edit_district">District *</label>
                            <input type="text" id="edit_district" name="edit_district" required>
                            <span class="error-message">Please enter district</span>
                        </div>
                        <div class="form-group">
                            <label for="edit_city">City *</label>
                            <input type="text" id="edit_city" name="edit_city" required>
                            <span class="error-message">Please enter city</span>
                        </div>
                        <div class="form-group">
                            <label for="edit_area">Area *</label>
                            <input type="text" id="edit_area" name="edit_area" required>
                            <span class="error-message">Please enter area</span>
                        </div>
                        <div class="form-group">
                            <label for="edit_street">Street Name *</label>
                            <input type="text" id="edit_street" name="edit_street" required>
                            <span class="error-message">Please enter street name</span>
                        </div>
                        <div class="form-group">
                            <label for="edit_pincode">Pincode *</label>
                            <input type="text" id="edit_pincode" name="edit_pincode" pattern="[0-9]{6}" required>
                            <span class="error-message">Please enter valid 6-digit pincode</span>
                        </div>
                        <div class="form-group">
                            <label for="edit_address">Full Address</label>
                            <textarea id="edit_address" name="edit_address"
                                placeholder="Complete address..."></textarea>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <span>âœ”</span> Update Voter
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <div class="table-section">
            <div class="table-header">
                <h2 class="section-title">Registered Voters</h2>
                <div class="table-controls">
                    <input type="text" id="searchVoterInput" placeholder="Search voters..."
                        style="margin-bottom: 0; margin-right: 1rem; width: 250px; padding: 6px; border-radius: 4px; border: 1px solid #ccc;">
                    <div class="rows-selector">
                        <label for="rowsPerPage">Show:</label>
                        <select id="rowsPerPage">
                            <option value="10">10 rows</option>
                            <option value="20">20 rows</option>
                            <option value="50">50 rows</option>
                            <option value="100">100 rows</option>
                        </select>
                    </div>
                    <button class="btn btn-secondary" id="exportBtn">
                        <span>â†“</span> Export CSV
                    </button>
                    <!-- Import button - UPDATED -->
                    <button type="button" class="file-upload-label" onclick="triggerImportCSV()">
                        <span>â†‘</span> Import CSV
                    </button>

                    <!-- Hidden file input for web browser fallback -->
                    <input type="file" id="importFile"
                        accept=".csv,text/csv,application/csv,text/comma-separated-values" style="display: none;">
                </div>
            </div>

            <div class="table-wrapper">
                <table id="votersTable">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>DOB</th>
                            <th>Age</th>
                            <th>Eligibility</th>
                            <th>Voter ID</th>
                            <th>Phone</th>
                            <th>District</th>
                            <th>City</th>
                            <th>Area</th>
                            <th>Street</th>
                            <th>Pincode</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <tr>
                            <td colspan="12" class="empty-state">
                                <div class="empty-state-icon">ðŸ“‹</div>
                                <p>No voters registered yet. Fill out the form above to add your first entry.</p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="pagination" id="pagination"></div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <span class="toast-icon" id="toastIcon">âœ“</span>
        <span class="toast-message" id="toastMessage"></span>
        <button class="toast-close" onclick="hideToast()">Ã—</button>
    </div>

    <script src="cordova.js"></script>
    <script src="js/script.js"></script>
    <script src="js/index.js"></script>
</body>

</html>